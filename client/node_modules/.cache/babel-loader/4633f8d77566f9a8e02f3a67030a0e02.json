{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{testAPI}from\"../api/api\";var GET_GOODS_AC=\"GET_GOODS_AC\";var GET_GOODBYID_AC=\"GET_GOODBYID_AC\";var REMOVE_GOODBYID_AC=\"REMOVE_GOODBYID_AC\";var CHANGE_PAGE_SIZE_GOODS=\"CHANGE_PAGE_SIZE_GOODS\";var CHANGE_PAGE_NUMBER_GOODS=\"CHANGE_PAGE_NUMBER_GOODS\";var CHANGE_SORT_BY=\"CHANGE_SORT_BY\";var CHANGE_FILTER=\"CHANGE_FILTER\";var ClEAR_GOODS_AC=\"ClEAR_GOODS_AC\";var REMOVE_FILTER=\"REMOVE_FILTER\";var initialState={goods:[],filter:null,filterBy:[\"Рекомендации\"],pageSize:3,totalCount:0,pageNumber:1,goodItem:[]};var CatalogReducer=function CatalogReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_GOODS_AC:debugger;return _objectSpread(_objectSpread({},state),{},{goods:_toConsumableArray(action.dataGoods.goods),totalCount:action.dataGoods.totalCount});case GET_GOODBYID_AC:return _objectSpread(_objectSpread({},state),{},{goodItem:[action.goodItem]});case REMOVE_GOODBYID_AC:return _objectSpread(_objectSpread({},state),{},{goodItem:null});case ClEAR_GOODS_AC:return initialState;case CHANGE_PAGE_SIZE_GOODS:return _objectSpread(_objectSpread({},state),{},{pageSize:action.pageSize});case CHANGE_PAGE_NUMBER_GOODS:return _objectSpread(_objectSpread({},state),{},{pageNumber:action.pageNumber});case CHANGE_SORT_BY:return _objectSpread(_objectSpread({},state),{},{filterBy:action.filterBy});case CHANGE_FILTER:return _objectSpread(_objectSpread({},state),{},{filter:action.filter});case REMOVE_FILTER:return _objectSpread(_objectSpread({},state),{},{filter:state.filter.filter(function(i){return i!==action.filter;})});default:return state;}};export var ClearGoods=function ClearGoods(){return{type:ClEAR_GOODS_AC};};export var changePageSize=function changePageSize(pageSize){return{type:CHANGE_PAGE_SIZE_GOODS,pageSize:pageSize};};export var changePageNumber=function changePageNumber(pageNumber){return{type:CHANGE_PAGE_NUMBER_GOODS,pageNumber:pageNumber};};export var changeSortBy=function changeSortBy(filterBy){return{type:CHANGE_SORT_BY,filterBy:filterBy};};var changeFilter=function changeFilter(filter){return{type:CHANGE_FILTER,filter:filter};};var getGoods=function getGoods(dataGoods){return{type:GET_GOODS_AC,dataGoods:dataGoods};};var getGood=function getGood(goodItem){return{type:GET_GOODBYID_AC,goodItem:goodItem};};export var removeGood=function removeGood(){return{type:REMOVE_GOODBYID_AC};};export var getGoodsForSlider=function getGoodsForSlider(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return testAPI.changeFilter();case 2:response=_context.sent;dispatch(getGoods(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getGoodsThunkById=function getGoodsThunkById(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return testAPI.getGood(id);case 2:response=_context2.sent;data=response.data.goods.data.good;data.reviews=response.data.goods.data.review;data.goodReviewsQuantity=response.data.reviewQuantity;dispatch(getGood(data));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getGoodsThunk=function getGoodsThunk(pageNumber,pageSize,data){return function(dispatch,getState){testAPI.changeFilter(data,pageSize,pageNumber).then(function(response){dispatch(changePageNumber(pageNumber));dispatch(changePageSize(pageSize));dispatch(getGoods(response.data));dispatch(changeFilter(data));});};};export var removeFilter=function removeFilter(filter){return function(dispatch,getState){dispatch({type:REMOVE_FILTER,filter:filter});debugger;var data=getState().goods.filter;testAPI.changeFilter(data,getState().goods.pageSize,getState().goods.pageNumber).then(function(response){});};};export default CatalogReducer;","map":{"version":3,"sources":["/Volumes/Anton/myApp-1/APP/client/src/redux/CatalogReducer.js"],"names":["testAPI","GET_GOODS_AC","GET_GOODBYID_AC","REMOVE_GOODBYID_AC","CHANGE_PAGE_SIZE_GOODS","CHANGE_PAGE_NUMBER_GOODS","CHANGE_SORT_BY","CHANGE_FILTER","ClEAR_GOODS_AC","REMOVE_FILTER","initialState","goods","filter","filterBy","pageSize","totalCount","pageNumber","goodItem","CatalogReducer","state","action","type","dataGoods","i","ClearGoods","changePageSize","changePageNumber","changeSortBy","changeFilter","getGoods","getGood","removeGood","getGoodsForSlider","dispatch","response","data","getGoodsThunkById","id","good","reviews","review","goodReviewsQuantity","reviewQuantity","getGoodsThunk","getState","then","removeFilter"],"mappings":"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","sourcesContent":["import { testAPI } from \"../api/api\";\n\nconst GET_GOODS_AC = \"GET_GOODS_AC\";\nconst GET_GOODBYID_AC = \"GET_GOODBYID_AC\";\nconst REMOVE_GOODBYID_AC = \"REMOVE_GOODBYID_AC\";\nconst CHANGE_PAGE_SIZE_GOODS = \"CHANGE_PAGE_SIZE_GOODS\";\nconst CHANGE_PAGE_NUMBER_GOODS = \"CHANGE_PAGE_NUMBER_GOODS\";\nconst CHANGE_SORT_BY = \"CHANGE_SORT_BY\";\nconst CHANGE_FILTER = \"CHANGE_FILTER\";\nconst ClEAR_GOODS_AC = \"ClEAR_GOODS_AC\";\nconst REMOVE_FILTER = \"REMOVE_FILTER\";\nlet initialState = {\n  goods: [],\n  filter: null,\n  filterBy: [\"Рекомендации\"],\n  pageSize: 3,\n  totalCount: 0,\n  pageNumber: 1,\n  goodItem: [],\n};\n\nconst CatalogReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_GOODS_AC:\n      debugger\n      return {\n        ...state,\n        goods: [...action.dataGoods.goods],\n        totalCount: action.dataGoods.totalCount,\n      };\n    case GET_GOODBYID_AC:\n      return { ...state, goodItem: [action.goodItem] };\n    case REMOVE_GOODBYID_AC:\n      return { ...state, goodItem: null };\n    case ClEAR_GOODS_AC:\n      return initialState;\n    case CHANGE_PAGE_SIZE_GOODS:\n      return { ...state, pageSize: action.pageSize };\n    case CHANGE_PAGE_NUMBER_GOODS:\n      return { ...state, pageNumber: action.pageNumber };\n    case CHANGE_SORT_BY:\n      return { ...state, filterBy: action.filterBy };\n    case CHANGE_FILTER:\n      return { ...state, filter: action.filter };\n    case REMOVE_FILTER:\n      return {\n        ...state,\n        filter: state.filter.filter((i) => i !== action.filter),\n      };\n    default:\n      return state;\n  }\n};\n\nexport const ClearGoods = () => ({ type: ClEAR_GOODS_AC });\nexport const changePageSize = (pageSize) => ({\n  type: CHANGE_PAGE_SIZE_GOODS,\n  pageSize,\n});\nexport const changePageNumber = (pageNumber) => ({\n  type: CHANGE_PAGE_NUMBER_GOODS,\n  pageNumber,\n});\nexport const changeSortBy = (filterBy) => ({ type: CHANGE_SORT_BY, filterBy });\n\nconst changeFilter = (filter) => ({ type: CHANGE_FILTER, filter });\n\nconst getGoods = (dataGoods) => ({ type: GET_GOODS_AC, dataGoods });\nconst getGood = (goodItem) => ({ type: GET_GOODBYID_AC, goodItem });\nexport const removeGood = () => ({ type: REMOVE_GOODBYID_AC });\n\nexport const getGoodsForSlider = () => async (dispatch) => {\n  let response = await testAPI.changeFilter();\n  dispatch(getGoods(response.data));\n};\nexport const getGoodsThunkById = (id) => async (dispatch) => {\n  let response = await testAPI.getGood(id);\n  var data = response.data.goods.data.good;\n  data.reviews = response.data.goods.data.review;\n  data.goodReviewsQuantity = response.data.reviewQuantity;\n  dispatch(getGood(data));\n};\nexport const getGoodsThunk = (pageNumber, pageSize, data) => (\n  dispatch,\n  getState\n) => {\n  testAPI.changeFilter(data, pageSize, pageNumber).then((response) => {\n    dispatch(changePageNumber(pageNumber));\n    dispatch(changePageSize(pageSize));\n    dispatch(getGoods(response.data));\n    dispatch(changeFilter(data));\n  });\n};\nexport const removeFilter = (filter) => (dispatch,getState) => {\n  dispatch({ type: REMOVE_FILTER, filter });\n  debugger\n  let data=getState().goods.filter\n  testAPI.changeFilter(data, getState().goods.pageSize, getState().goods.pageNumber).then((response) => {}\n  \n  )\n};\nexport default CatalogReducer;\n"]},"metadata":{},"sourceType":"module"}