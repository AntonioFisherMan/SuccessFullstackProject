{"ast":null,"code":"import _classCallCheck from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import CatalogPage from'./CatalogPage';import{compose}from'redux';import{getGoodsThunk,changeSortBy,removeFilter,getGoodsThunkById,changePageNumber,ClearGoods}from'../../../redux/CatalogReducer';import{orderBy}from'lodash';import{IsPopUpHook}from'../../../hoc/IsPopUpHook';import{isPopUp}from'../../../redux/AppReducer';import{getFilterBy,getTotalGoods}from'../../../redux/CatalogSelector';import{reset}from'redux-form';var CatalogPageContainer=/*#__PURE__*/function(_React$Component){_inherits(CatalogPageContainer,_React$Component);var _super=_createSuper(CatalogPageContainer);function CatalogPageContainer(){var _this;_classCallCheck(this,CatalogPageContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onPageChanged=function(pageNumber){var pageSize=_this.props.pageSize;_this.props.getGoodsThunk(pageNumber,pageSize,_this.props.filter);_this.props.changePageNumber(pageNumber);};_this.changePageSize=function(pageSize){var pageNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;_this.props.getGoodsThunk(pageNumber,pageSize,_this.props.filter);};_this.changeFilter=function(filter){_this.props.reset('filter');_this.props.getGoodsThunk(_this.props.pageNumber,_this.props.pageSize,filter);};return _this;}_createClass(CatalogPageContainer,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.ClearGoods();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this$props=this.props,pageNumber=_this$props.pageNumber,pageSize=_this$props.pageSize;this.props.getGoodsThunk(pageNumber,pageSize,this.props.filter);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props2=this.props,pageNumber=_this$props2.pageNumber,pageSize=_this$props2.pageSize;if(prevProps.filter!==this.props.filter){this.props.getGoodsThunk(pageNumber,pageSize,this.props.filter);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CatalogPage,Object.assign({},this.props,{onPageChanged:this.onPageChanged,changeFilter:this.changeFilter,removeFilter:this.props.removeFilter,changeSortBy:this.props.changeSortBy,changePageSize:this.changePageSize})));}}]);return CatalogPageContainer;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{goods:getTotalGoods(state),filterBy:getFilterBy(state),filter:state.goods.filter,token:state.auth.token,items:state.card.items,pageSize:state.goods.pageSize,pageNumber:state.goods.pageNumber,totalCount:state.goods.totalCount};};export default compose(IsPopUpHook,connect(mapStateToProps,{getGoodsThunk:getGoodsThunk,getGoodsThunkById:getGoodsThunkById,changePageNumber:changePageNumber,removeFilter:removeFilter,isPopUp:isPopUp,changeSortBy:changeSortBy,reset:reset,ClearGoods:ClearGoods}))(CatalogPageContainer);","map":{"version":3,"sources":["/Volumes/Anton/myApp-1/APP/client/src/components/Pages/CatalogPage/CatalogPageContainer.jsx"],"names":["React","connect","CatalogPage","compose","getGoodsThunk","changeSortBy","removeFilter","getGoodsThunkById","changePageNumber","ClearGoods","orderBy","IsPopUpHook","isPopUp","getFilterBy","getTotalGoods","reset","CatalogPageContainer","onPageChanged","pageNumber","pageSize","props","filter","changePageSize","changeFilter","prevProps","Component","mapStateToProps","state","goods","filterBy","token","auth","items","card","totalCount"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport CatalogPage from './CatalogPage'\nimport { compose } from 'redux'\nimport { getGoodsThunk, changeSortBy,removeFilter,getGoodsThunkById, changePageNumber, ClearGoods } from '../../../redux/CatalogReducer'\nimport { orderBy } from 'lodash'\nimport { IsPopUpHook } from '../../../hoc/IsPopUpHook'\nimport { isPopUp } from '../../../redux/AppReducer'\nimport { getFilterBy,getTotalGoods } from '../../../redux/CatalogSelector'\nimport {reset} from 'redux-form';\n\n\nclass CatalogPageContainer extends React.Component {\n  componentWillUnmount() {\n    this.props.ClearGoods();\n  }\n  componentDidMount() {\n    const { pageNumber, pageSize } = this.props;\n    this.props.getGoodsThunk(pageNumber,pageSize,this.props.filter);\n  }\n  componentDidUpdate(prevProps){\n    const { pageNumber, pageSize } = this.props;\n    if(prevProps.filter!==this.props.filter){\n      this.props.getGoodsThunk(pageNumber,pageSize,this.props.filter);\n    }\n  }\n  onPageChanged = (pageNumber) => {\n    const { pageSize } = this.props;\n    this.props.getGoodsThunk(pageNumber, pageSize,this.props.filter)\n    this.props.changePageNumber(pageNumber)\n  }\n  changePageSize = (pageSize, pageNumber=1) => {\n    this.props.getGoodsThunk(pageNumber,pageSize,this.props.filter)\n  }\n  changeFilter=(filter)=>{\n     this.props.reset('filter')\n     this.props.getGoodsThunk(this.props.pageNumber,this.props.pageSize,filter)\n  }\n  render() {\n    return (\n      <>\n        <CatalogPage  {...this.props} onPageChanged={this.onPageChanged}changeFilter={this.changeFilter} removeFilter={this.props.removeFilter} changeSortBy={this.props.changeSortBy} changePageSize={this.changePageSize}\n        />\n      </>\n    )\n  }\n}\n\n\nlet mapStateToProps = (state) => {\n  return {\n    goods: getTotalGoods(state),\n    filterBy:getFilterBy(state),\n    filter:state.goods.filter,\n    token: state.auth.token,\n    items: state.card.items,\n    pageSize: state.goods.pageSize,\n    pageNumber: state.goods.pageNumber,\n    totalCount: state.goods.totalCount\n  }\n}\n\nexport default compose(\n  IsPopUpHook,\n  connect(mapStateToProps, { getGoodsThunk, getGoodsThunkById, changePageNumber,removeFilter, isPopUp, changeSortBy,reset, ClearGoods })\n)(CatalogPageContainer)\n\n"]},"metadata":{},"sourceType":"module"}