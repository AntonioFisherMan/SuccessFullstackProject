{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Volumes/Anton/myApp-1/APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{returnErrors,returnSuccess,clearErrors,clearSuccess}from'./SuccessErrorReducer';import{testAPI}from\"../api/api\";var USER_LOADING=\"USER_LOADING\";var USER_LOADED=\"USER_LOADED\";var AUTH_ERROR=\"AUTH_ERROR\";var LOGIN_SUCCESS=\"LOGIN_SUCCESS\";var LOGIN_FAIL=\"LOGIN_FAIL\";var LOGOUT_SUCCESS=\"LOGOUT_SUCCESS\";var REGISTER_SUCCESS=\"REGISTER_SUCCESS\";var REGISTER_FAIL=\"REGISTER_FAIL\";var FORGOT_PASS=\"FORGOT_PASS\";var FORGOT_PASS_RESET=\"FORGOT_PASS_RESET\";var EMAIL_SENT=\"EMAIL_SENT\";var RESET_PASS=\"RESET_PASS\";var RESET_ERROR=\"RESET_ERROR\";var FORGOT_ERROR=\"FORGOT_ERROR\";var initialState={token:sessionStorage.getItem(\"token\")||\"\",isAuth:null,isLoading:false,user:null,userInform:null,forgotEmail:null,emailSent:false};var AuthReducer=function AuthReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case USER_LOADING:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case USER_LOADED:sessionStorage.setItem('token',action.payload.token);return _objectSpread(_objectSpread({},state),{},{isAuth:true,user:action.payload.user,userInform:action.userInform});case LOGIN_SUCCESS:case REGISTER_SUCCESS:sessionStorage.setItem('token',action.payload.token);return _objectSpread(_objectSpread({},state),{},{isAuth:true,isLoading:false});case AUTH_ERROR:case LOGIN_FAIL:case REGISTER_FAIL:case LOGOUT_SUCCESS:sessionStorage.removeItem('token');return _objectSpread(_objectSpread({},state),{},{isAuth:false,isLoading:false,user:null,userInform:null,token:null});case FORGOT_PASS:return _objectSpread(_objectSpread({},state),{},{forgotEmail:action.forgotEmail});case EMAIL_SENT:return _objectSpread(_objectSpread({},state),{},{emailSent:action.bool});case FORGOT_PASS_RESET:return _objectSpread(_objectSpread({},state),{},{forgotEmail:action.forgotEmail,emailSent:false});default:return state;}};export var userLoad=function userLoad(payload,userInform){return{type:USER_LOADED,payload:payload,userInform:userInform};};export var changePass=function changePass(forgotEmail){return{type:FORGOT_PASS,forgotEmail:forgotEmail};};export var emailSent=function emailSent(bool){return{type:EMAIL_SENT,bool:bool};};export var resetEmailSentClear=function resetEmailSentClear(forgotEmail){return{type:FORGOT_PASS_RESET,forgotEmail:forgotEmail};};export var requestToken=function requestToken(){return function(dispatch,getState){testAPI.forgotPassword(getState().auth.forgotEmail).then(function(response){dispatch(emailSent(true));}).catch(function(err){dispatch(returnErrors(err.response.data,err.response.status,'FORGOT_ERROR'));dispatch({type:FORGOT_ERROR});});};};export var resetPass=function resetPass(newPassword,verifyPassword,token){return function(dispatch){testAPI.resetPassword(newPassword,verifyPassword,token).then(function(response){dispatch({type:RESET_PASS});dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_RESET'));}).catch(function(err){dispatch(returnErrors(err.response.data.message,err.response.status,'RESET_ERROR'));dispatch({type:RESET_ERROR});});};};export var changeUserPass=function changeUserPass(oldPass,newPassword,verifyPassword){return function(dispatch,getState){testAPI.changeUserPass(oldPass,newPassword,verifyPassword,getState().auth.user.email).then(function(response){dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_CHANGE_PASS'));}).catch(function(err){dispatch(returnErrors(err.response.data.message,err.response.status,'ERROR_CHANGE_PASS'));});};};export var getAuth=function getAuth(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var login=function login(email,password,rememberMe){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:USER_LOADING});testAPI.login(email,password,rememberMe).then(function(response){dispatch(userLoad(response.data,response.data.inform.inform));dispatch({type:LOGIN_SUCCESS,payload:response.data});}).catch(function(err){debugger;dispatch(returnErrors(err.response.data.message,err.response.status,'LOGIN_FAIL'));dispatch({type:LOGIN_FAIL});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var register=function register(name,email,password){return function(dispatch){testAPI.register(name,email,password).then(function(response){debugger;dispatch({type:REGISTER_SUCCESS,payload:response.data});dispatch(userLoad(response.data));}).catch(function(err){dispatch(returnErrors(err.response.data.message,err.response.status,'REGISTER_FAIL'));dispatch({type:REGISTER_FAIL});});};};export var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT_SUCCESS});};};export var subscribeNewUser=function subscribeNewUser(email){return function(dispatch){testAPI.subscribeNewUser(email).then(function(response){dispatch(returnSuccess(response.data.message,response.status,'SUBSCRIBER_SUCCESS'));var timer=setTimeout(function(){dispatch(clearSuccess());},3000);return function(){return clearTimeout(timer);};}).catch(function(err){dispatch(returnErrors(err.response.data.message,err.response.status,'SUBSCRIBER_FAIL'));});};};export default AuthReducer;","map":{"version":3,"sources":["/Volumes/Anton/myApp-1/APP/client/src/redux/AuthReducer.js"],"names":["returnErrors","returnSuccess","clearErrors","clearSuccess","testAPI","USER_LOADING","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","REGISTER_SUCCESS","REGISTER_FAIL","FORGOT_PASS","FORGOT_PASS_RESET","EMAIL_SENT","RESET_PASS","RESET_ERROR","FORGOT_ERROR","initialState","token","sessionStorage","getItem","isAuth","isLoading","user","userInform","forgotEmail","emailSent","AuthReducer","state","action","type","setItem","payload","removeItem","bool","userLoad","changePass","resetEmailSentClear","requestToken","dispatch","getState","forgotPassword","auth","then","response","catch","err","data","status","resetPass","newPassword","verifyPassword","resetPassword","message","changeUserPass","oldPass","email","getAuth","login","password","rememberMe","inform","register","name","logout","subscribeNewUser","timer","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["\nimport {returnErrors,returnSuccess,clearErrors, clearSuccess} from './SuccessErrorReducer'\nimport { testAPI } from \"../api/api\";\n\n const USER_LOADING=\"USER_LOADING\"\nconst USER_LOADED=\"USER_LOADED\"\nconst AUTH_ERROR=\"AUTH_ERROR\"\nconst LOGIN_SUCCESS=\"LOGIN_SUCCESS\"\nconst LOGIN_FAIL=\"LOGIN_FAIL\"\n const LOGOUT_SUCCESS=\"LOGOUT_SUCCESS\"\nconst REGISTER_SUCCESS=\"REGISTER_SUCCESS\"\nconst REGISTER_FAIL=\"REGISTER_FAIL\"\n\nconst FORGOT_PASS=\"FORGOT_PASS\"\nconst FORGOT_PASS_RESET=\"FORGOT_PASS_RESET\"\nconst EMAIL_SENT=\"EMAIL_SENT\"\nconst RESET_PASS=\"RESET_PASS\"\n\nconst RESET_ERROR=\"RESET_ERROR\"\nconst FORGOT_ERROR=\"FORGOT_ERROR\"\n\nconst initialState = {\n  token:sessionStorage.getItem(\"token\")||\"\",\n  isAuth: null,\n  isLoading: false,\n  user:null,\n  userInform:null,\n  forgotEmail:null,\n  emailSent:false\n};\n\nconst AuthReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case USER_LOADING:\n      return { ...state, isLoading: true };\n    case USER_LOADED:\n      sessionStorage.setItem('token',action.payload.token)\n      return { ...state,isAuth: true, user:action.payload.user,userInform:action.userInform};\n    case LOGIN_SUCCESS:\n    case REGISTER_SUCCESS:\n      sessionStorage.setItem('token',action.payload.token)\n      return { ...state,isAuth: true, isLoading: false};\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case REGISTER_FAIL:\n    case LOGOUT_SUCCESS:\n      sessionStorage.removeItem('token')\n      return {\n        ...state,\n        isAuth: false,\n        isLoading: false,\n        user: null,\n        userInform:null,\n        token: null\n      };\n\n      case FORGOT_PASS:\n        return{...state,forgotEmail:action.forgotEmail}\n        case EMAIL_SENT:\n          return{...state,emailSent:action.bool}\n          case FORGOT_PASS_RESET:\n            return{...state,forgotEmail:action.forgotEmail,emailSent:false}\n    default:\n      return state;\n  }\n};\n\nexport const userLoad=(payload,userInform)=>({type:USER_LOADED,payload,userInform})\n\nexport const changePass=(forgotEmail)=>({type:FORGOT_PASS,forgotEmail})\nexport const emailSent=(bool)=>({type:EMAIL_SENT,bool})\nexport const resetEmailSentClear=(forgotEmail)=>({type:FORGOT_PASS_RESET,forgotEmail})\n\n\nexport const requestToken=()=>(dispatch,getState)=>{\n    testAPI.forgotPassword(getState().auth.forgotEmail).then(response=>{\n         dispatch(emailSent(true))\n    })\n    .catch(err=>{\n      dispatch(returnErrors(err.response.data,err.response.status,'FORGOT_ERROR'))\n      dispatch({type:FORGOT_ERROR})\n    })\n}\nexport const resetPass=(newPassword,verifyPassword,token)=> dispatch=>{\n  testAPI.resetPassword(newPassword,verifyPassword,token).then(response=>{\n    dispatch({type:RESET_PASS})\n    dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_RESET'))\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'RESET_ERROR'))\n    dispatch({type:RESET_ERROR})\n  })\n}\n\nexport const changeUserPass=(oldPass,newPassword,verifyPassword)=>(dispatch,getState)=>{\n  testAPI.changeUserPass(oldPass,newPassword,verifyPassword,getState().auth.user.email).then(response=>{\n    dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_CHANGE_PASS'))\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'ERROR_CHANGE_PASS'))\n  })\n}\nexport const getAuth=()=>async (dispatch,getState)=>{\n  // try {\n  //   const token=getState().auth.token;\n  //    let response=await testAPI.getAuth(token)\n  //     dispatch(userLoad(response.data))\n  // } catch (error) {\n  //   dispatch({type:AUTH_ERROR})\n  // }\n}\nexport const login = (email,password,rememberMe) => async(dispatch) => {\n  dispatch({type:USER_LOADING})\n  testAPI.login(email,password,rememberMe).then(response=>{\n    dispatch(userLoad(response.data,response.data.inform.inform))\n    dispatch({type:LOGIN_SUCCESS,payload:response.data})\n  }).catch(err=>{\n    debugger\n    dispatch(returnErrors(err.response.data.message,err.response.status,'LOGIN_FAIL'))\n    dispatch({type:LOGIN_FAIL})\n  })\n};\n\nexport const register=(name,email,password)=>dispatch=>{\n  testAPI.register(name,email,password).then(response=>{\n    debugger\n    dispatch({type:REGISTER_SUCCESS,payload:response.data})\n    dispatch(userLoad(response.data))\n \n  }).catch(err=>{\n      dispatch(returnErrors(err.response.data.message,err.response.status,'REGISTER_FAIL'))\n       dispatch({type:REGISTER_FAIL})\n  })\n}\n\nexport const logout=()=>dispatch=>{\n  dispatch({type:LOGOUT_SUCCESS})\n\n}\nexport const subscribeNewUser=(email)=>dispatch=>{\n  testAPI.subscribeNewUser(email).then(response=>{\n    dispatch(returnSuccess(response.data.message,response.status,'SUBSCRIBER_SUCCESS'))\n    const timer = setTimeout(() => {\n      dispatch(clearSuccess())\n    }, 3000);\n    return () => clearTimeout(timer);\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'SUBSCRIBER_FAIL'))\n  })\n}\n\nexport default AuthReducer;\n"]},"metadata":{},"sourceType":"module"}